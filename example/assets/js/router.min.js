(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t){var i="function"==typeof Map?new Map:void 0;return e=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,e)}function e(){return function(t,e,o){if(r())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var u=new(t.bind.apply(t,i));return o&&n(u,o.prototype),u}(t,arguments,o(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n(e,t)},e(t)}function r(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(r=function(){return!!t})()}function n(t,e){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,e)}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}var i=function(e){function i(e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=function(e,n,i){return n=o(n),function(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,r()?Reflect.construct(n,i||[],o(e).constructor):n.apply(e,i))}(this,i,[e])).name="Invalid argument error",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)}(i,e),u=i,Object.defineProperty(u,"prototype",{writable:!1}),u;var u}(e(Error));function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}function l(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var f=function(){function t(){throw function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),new Error("".concat((this instanceof t?this.constructor:void 0).name,' class must not be called with "new" keyword!'))}return e=t,r=[{key:"setDocument",value:function(e){if("object"!==u(e))throw new i("'document' must be a Document object!");b._=l(t,this,e)}},{key:"_getDocument",value:function(){return l(t,this,b)._}},{key:"setTitle",value:function(e){if("string"!=typeof e)throw new i("'title' must be a string!");p._=l(t,this,e),l(t,this,s).call(this)}},{key:"getTitle",value:function(){return l(t,this,p)._||l(t,this,y)._}},{key:"setRootTitle",value:function(e){if("string"!=typeof e)throw new i("'value' must be a string!");y._=l(t,this,e),l(t,this,s).call(this)}},{key:"getRootTitle",value:function(){return l(t,this,y)._}}],null&&c(e.prototype,null),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r}();function s(){var t=this._getDocument();this.getTitle()?t.title=this.getTitle():t.title=this.getRootTitle()}var y={_:""},p={_:""},b={_:void 0};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var e=function(t){if("object"!=m(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:e+""}var w=function(){return t=function t(){throw function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),new Error("".concat((this instanceof t?this.constructor:void 0).name,' class must not be called with "new" keyword!'))},e=[{key:"render",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof t)throw new i("'template' must be a function!");try{return t(e)}catch(t){console.error("Error during template rendering: ",t)}}}],null&&h(t.prototype,null),e&&h(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S(n.key),n)}}function S(t){var e=function(t){if("object"!=g(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:e+""}function _(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var P=function(){function t(){throw function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),new Error("".concat((this instanceof t?this.constructor:void 0).name,' class must not be called with "new" keyword!'))}return e=t,r=[{key:"findAll",value:function(t,e){if("string"!=typeof t)throw new i("'element' must be an HTMLElement object!");if("object"!==g(e))throw new i("'document' must be a Document object!");var r=e.querySelectorAll(t);return this._setElements(r),this}},{key:"each",value:function(e){if("function"!=typeof e)throw new i("'callback' must be a function!");var r=this._getElements();_(t,this,O)._.length&&r.forEach(e)}},{key:"_setElements",value:function(e){var r;(r=_(t,this,O)._).push.apply(r,function(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e))}},{key:"_getElements",value:function(){return _(t,this,O)._}}],null&&j(e.prototype,null),r&&j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r}(),O={_:[]};function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T(n.key),n)}}function T(t){var e=function(t){if("object"!=E(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==E(e)?e:e+""}var A=function(){return t=function t(){throw function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),new Error("".concat((this instanceof t?this.constructor:void 0).name,' class must not be called with "new" keyword!'))},e=[{key:"onClick",value:function(t,e){if("object"!==E(t))throw new i("'element' must be an HTMLElement object!");if("function"!=typeof e)throw new i("'callback' must be a function!");t.addEventListener("click",e)}}],null&&k(t.prototype,null),e&&k(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,I(n.key),n)}}function C(t,e,r){return e&&x(t.prototype,e),r&&x(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function D(t,e,r){return(e=I(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(t){var e=function(t){if("object"!=R(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}var L,M=C(function t(e){var r=e.title,n=e.template;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),D(this,"title",""),D(this,"template",void 0),D(this,"middlewares",[]),D(this,"meta",{params:{},query:{}}),this.title=null!=r?r:this.title,this.template=n});function U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function W(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?U(Object(r),!0).forEach(function(e){B(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function H(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,F(n.key),n)}}function B(t,e,r){return(e=F(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F(t){var e=function(t){if("object"!=q(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==q(e)?e:e+""}function z(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var G=function(){function t(){throw function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),new Error("".concat((this instanceof t?this.constructor:void 0).name,' class must not be called with "new" keyword!'))}return e=t,r=[{key:"configure",value:function(t){var e=t.window,r=t.document,n=t.selector;if("object"!==q(e))throw new i("'window' must be a Window object!");if("object"!==q(r))throw new i("'document' must be a Document object!");if(n&&"string"!=typeof n)throw new i("'selector' must be a string!");n&&(this._rootElement=n),this._window=e,this._document=r}},{key:"_setRouteToURL",value:function(t){if("string"!=typeof t||!t.startsWith("/"))throw new i("'route' must be a string starting with \"/\"!");this._window.history.pushState({},"",t)}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if("function"!=typeof e)throw new i("'callback' must be a function!");f.setDocument(this._document),f.setRootTitle(this._document.title),z(t,this,V).call(this),z(t,this,X).call(this),z(t,this,Y).call(this),e()}}],null&&H(e.prototype,null),r&&H(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r}();function J(t){for(var e in this._routes){var r=new RegExp("^".concat(e.replace(/\{(\w+)\}/g,"(?<$1>[^/{}]+)"),"$"));if(r.test(t)){var n=r.exec(t).groups;return z(L,this,K).call(this,e),z(L,this,N).call(this,e,n),this._routes[e]}}}function K(t){var e={},r=location.search;if(!r.length)return!1;r.slice(1).split("&").forEach(function(t){var r,n,o=(r=t.split("="),n=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,c=[],a=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;a=!1}else for(;!(a=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);a=!0);}catch(t){l=!0,o=t}finally{try{if(!a&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(r,n)||function(t,e){if(t){if("string"==typeof t)return $(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],u=o[1];e[i]=u}),this._routes[t].meta.query=W({},e)}function N(t,e){this._routes[t].meta.params=W({},e)}function Q(t){try{var e,r=null!==(e=z(L,this,J).call(this,t))&&void 0!==e?e:this._defaultRoute,n=r.title,o=r.template,i=r.middlewares,u=r.meta;f.setTitle(n),z(L,this,Z).call(this,i),this._document.querySelector(this._rootElement).innerHTML=w.render(o,u)}catch(e){console.error("Error to inject route template:",t,e)}}function V(){var t=this;this._window.addEventListener("popstate",function(e){var r=e.target.location.pathname;z(L,t,Q).call(t,r)})}function X(){var t=this._window.location.pathname;z(L,this,Q).call(this,t)}function Y(){var t=this;P.findAll("a",this._document).each(function(e){A.onClick(e,function(e){if(e.target.hasAttribute("data-link"))return!1;e.preventDefault();var r=e.target.getAttribute("href");t._setRouteToURL(r),z(L,t,Q).call(t,r)})})}function Z(t){try{t.length&&t.forEach(function(t){return t()})}catch(t){console.error("Error executing middleware:",t)}}function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t){return function(t){if(Array.isArray(t))return rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return rt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ot(n.key),n)}}function ot(t){var e=function(t){if("object"!=tt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tt(e)?e:e+""}function it(t,e){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},it(t,e)}L=G,B(G,"_window",void 0),B(G,"_document",void 0),B(G,"_rootElement","#root"),B(G,"_routes",{}),B(G,"_currentRoute",""),B(G,"_routePrefix",""),B(G,"_defaultRoute",new M({title:"404",template:function(){return"404 | Page not found!"}}));var ut=function(t){function e(){throw function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),new Error("".concat((this instanceof e?this.constructor:void 0).name,' class must not be called with "new" keyword!'))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(e,t),r=e,n=[{key:"add",value:function(t,e){if("string"!=typeof t)throw new i("'route' must be a string!");if("function"!=typeof e)throw new i("'callback' must be a function!");return this._routes[this._routePrefix+t]=new M({template:e}),this._currentRoute=t,this}},{key:"group",value:function(t,e){if("string"!=typeof t||!t.startsWith("/"))throw new i("'prefix' must be a string!");if("function"!=typeof e)throw new i("'callback' must be a function!");var r=this._routePrefix;return this._routePrefix=t,e(),this._routePrefix=r,this}},{key:"middleware",value:function(t){if(!Array.isArray(t))throw new i("'middlewares' must be an array!");var e;if(this._routePrefix)for(var r in this._routes){var n;r.startsWith(this._routePrefix)&&(n=this._routes[r].middlewares).push.apply(n,et(t))}else(e=this._routes[this._routePrefix+this._currentRoute].middlewares).push.apply(e,et(t))}},{key:"title",value:function(t){if("string"!=typeof t)throw new i("'value' must be a string!");this._routes[this._routePrefix+this._currentRoute].title=t}},{key:"redirect",value:function(t){var e;if("string"!=typeof t||!t.startsWith("/"))throw new i("'to' must be a string starting route with \"/\"!");this._setRouteToURL(t);var r=null!==(e=this._routes[t])&&void 0!==e?e:this._defaultRoute,n=r.template,o=r.meta;return w.render(n,o)}}],null&&nt(r.prototype,null),n&&nt(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(G);window.Route=ut,window.Router=G})();